{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://swarm1.io/schemas/seo-audit.schema.json",
  "title": "SEO Audit",
  "description": "Schema for validating SEO audit results",
  "type": "object",
  "required": [
    "generated_at",
    "summary",
    "pages",
    "broken_links_count",
    "canonical_present_rate",
    "has_sitemap"
  ],
  "properties": {
    "generated_at": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of audit generation"
    },
    "audit_url": {
      "type": "string",
      "format": "uri",
      "description": "Base URL that was audited"
    },
    "summary": {
      "type": "string",
      "minLength": 1,
      "description": "Executive summary of SEO audit findings"
    },
    "has_sitemap": {
      "type": "boolean",
      "description": "Whether a sitemap.xml was found"
    },
    "sitemap_url": {
      "type": "string",
      "format": "uri",
      "description": "URL to the sitemap if found"
    },
    "broken_links_count": {
      "type": "integer",
      "minimum": 0,
      "description": "Total number of broken links found"
    },
    "canonical_present_rate": {
      "type": "number",
      "minimum": 0,
      "maximum": 1,
      "description": "Percentage of pages with canonical tags (0-1)"
    },
    "pages": {
      "type": "array",
      "minItems": 1,
      "description": "List of audited pages",
      "items": {
        "type": "object",
        "required": ["url", "title", "meta_description", "h1_count", "canonical_ok"],
        "properties": {
          "url": {
            "type": "string",
            "format": "uri",
            "description": "Page URL"
          },
          "title": {
            "type": "string",
            "minLength": 1,
            "description": "Page title tag content"
          },
          "title_length": {
            "type": "integer",
            "minimum": 0,
            "description": "Character count of title"
          },
          "meta_description": {
            "type": "string",
            "description": "Meta description content"
          },
          "meta_description_length": {
            "type": "integer",
            "minimum": 0,
            "description": "Character count of meta description"
          },
          "h1_count": {
            "type": "integer",
            "minimum": 0,
            "description": "Number of H1 tags on page"
          },
          "canonical_ok": {
            "type": "boolean",
            "description": "Whether canonical tag is properly set"
          },
          "canonical_url": {
            "type": "string",
            "format": "uri",
            "description": "Canonical URL if present"
          },
          "status_code": {
            "type": "integer",
            "minimum": 100,
            "maximum": 599,
            "description": "HTTP status code"
          },
          "load_time_ms": {
            "type": "integer",
            "minimum": 0,
            "description": "Page load time in milliseconds"
          },
          "issues": {
            "type": "array",
            "description": "SEO issues found on this page",
            "items": {
              "type": "string"
            }
          }
        }
      }
    },
    "broken_links": {
      "type": "array",
      "description": "List of broken links found",
      "items": {
        "type": "object",
        "required": ["source_url", "target_url", "status_code"],
        "properties": {
          "source_url": {
            "type": "string",
            "format": "uri"
          },
          "target_url": {
            "type": "string",
            "format": "uri"
          },
          "status_code": {
            "type": "integer"
          },
          "anchor_text": {
            "type": "string"
          }
        }
      }
    },
    "recommendations": {
      "type": "array",
      "description": "SEO improvement recommendations",
      "items": {
        "type": "object",
        "required": ["priority", "category", "description"],
        "properties": {
          "priority": {
            "type": "string",
            "enum": ["high", "medium", "low"]
          },
          "category": {
            "type": "string",
            "enum": ["technical", "content", "performance", "accessibility"]
          },
          "description": {
            "type": "string"
          },
          "affected_pages": {
            "type": "integer",
            "minimum": 0
          }
        }
      }
    }
  },
  "additionalProperties": false
}
