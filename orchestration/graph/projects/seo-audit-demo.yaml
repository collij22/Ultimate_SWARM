version: '1.0'
project_id: seo-audit-demo
concurrency: 3
defaults:
  retries:
    max: 1
    backoff_ms: 1000
  timeout_ms: 180000
nodes:
  - id: search
    type: web_search_fetch
    params:
      query: 'ref-tools MCP server'
      outDir: websearch_demo

  - id: audit
    type: agent_task
    requires: [search]
    params:
      capability: seo.audit

  - id: doc
    type: agent_task
    requires: [audit]
    params:
      capability: doc.generate

  - id: demo_runbook
    type: demo_runbook
    requires: [doc]
    params:
      auv: AUV-1202
      steps: ['web.search', 'web.fetch', 'seo.audit', 'doc.generate']

  - id: package
    type: package
    requires: [demo_runbook]
    params:
      auv: AUV-1202

  - id: report
    type: report
    requires: [package]
    params:
      auv: AUV-1202
      includeReferences: true
      intentCompare: true
      theme: light
      embedSmallAssetsKb: 100

edges:
  - [search, audit]
  - [audit, doc]
  - [doc, demo_runbook]
  - [demo_runbook, package]
  - [package, report]
