id: AUV-0003
title: Product search, price bounds, and sorting
owner: web
status: active
tags: [ui, api, products]

acceptance:
  summary: >
    Users can filter products by text, constrain by min/max price, and sort results.
    API supports q, minPrice, maxPrice, sort; UI renders and navigates to detail.

requirements:
  api:
    - GET /api/products supports:
      - q: substring match on title (case-insensitive)
      - minPrice, maxPrice: numeric bounds
      - sort: one of [price_asc, price_desc, title_asc]
    - GET /api/products/:id unchanged (still returns exact item)
  ui:
    - /products.html shows controls for search, min/max price, sort
    - Grid updates after Apply; clicking a card navigates to detail

tests:
  playwright:
    - tests/robot/playwright/products-filter.spec.ts
  api:
    - optional: tests/robot/playwright/api/products-filter.spec.ts

artifacts:
  required:
    - runs/AUV-0003/ui/products_search.png
    - runs/AUV-0003/perf/lighthouse.json

perf_budget:
  lighthouse:
    pages:
      - url: /products.html
        min_performance_score: 0.9

notes:
  - Server health at /health must be OK.
  - Keep test IDs stable: product-grid, product-card, product-title, product-price.